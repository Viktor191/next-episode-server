# NextEpisode Server

üì° **NextEpisode Server** ‚Äî —ç—Ç–æ –±—ç–∫–µ–Ω–¥-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ NextEpisode, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
–≤—ã—Ö–æ–¥ –Ω–æ–≤—ã—Ö —Å–µ–∑–æ–Ω–æ–≤ —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ —Ñ–∏–ª—å–º–æ–≤, –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–º.

---

## üöÄ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Node.js** + **Express.js**
- **MongoDB** (—á–µ—Ä–µ–∑ Mongoose)
- **TypeScript**
- **JWT** (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- **Zod** (–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- **Nodemailer** + **Resend API** (—Ä–∞—Å—Å—ã–ª–∫–∞ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **Google OAuth2** (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google)
- **Cron** (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–µ–∑–æ–Ω–æ–≤ –∏ —Ñ–∏–ª—å–º–æ–≤)
- **Axios** (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TMDB API)
- **Helmet** (–∑–∞—â–∏—Ç–∞ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ controllers/      # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã Express
‚îú‚îÄ‚îÄ cron/             # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–µ–∑–æ–Ω–æ–≤ –∏ —Ñ–∏–ª—å–º–æ–≤)
‚îú‚îÄ‚îÄ helpers/          # –£—Ç–∏–ª–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—á—Ç—ã)
‚îú‚îÄ‚îÄ models/           # Mongoose-—Å—Ö–µ–º—ã (User, Show)
‚îú‚îÄ‚îÄ routes/           # –†–æ—É—Ç–∏–Ω–≥ Express
‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä.)
‚îú‚îÄ‚îÄ types/            # –¢–∏–ø—ã TypeScript
‚îî‚îÄ‚îÄ server.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –∏ —É–∫–∞–∂–∏—Ç–µ:

```
PORT=3000
MONGO_URI=–≤–∞—à–∞_—Å—Ç—Ä–æ–∫–∞_–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
JWT_SECRET=—Å–µ–∫—Ä–µ—Ç_—Ç–æ–∫–µ–Ω–∞
GOOGLE_CLIENT_ID=–≤–∞—à_google_client_id
EMAIL_FROM=no-reply@nextepisode.top
EMAIL_PASSWORD=–ø–∞—Ä–æ–ª—å_–∏–ª–∏_API_–∫–ª—é—á
RESEND_API_KEY=–≤–∞—à_resend_api_key
CLIENT_URL=http://localhost:5173
```

### 3. –ó–∞–ø—É—Å–∫ –≤ dev-—Ä–µ–∂–∏–º–µ

```bash
npm run start
```

### 4. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ production

```bash
npm run build
npm run serve
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- JWT-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (middleware `authenticateToken`)
- Google OAuth –≤—Ö–æ–¥
- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email

---

## üì¨ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã—Ö–æ–¥–µ –Ω–æ–≤—ã—Ö —Å–µ–∑–æ–Ω–æ–≤ —Å–µ—Ä–∏–∞–ª–æ–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–ª–∏–∑–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Resend –∏–ª–∏ Nodemailer
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ (`notify: false`)

---

## üì° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —à–æ—É –∏ —Ñ–∏–ª—å–º–∞—Ö —á–µ—Ä–µ–∑ TMDB API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (—è–∑—ã–∫ `ru-RU`)

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –≤—Ö–æ–¥ / —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (—Å–µ—Ä–∏–∞–ª—ã –∏ —Ñ–∏–ª—å–º—ã)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ä–µ–ª–∏–∑–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ email –∏ telegram
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## –ü—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É [https://nextepisode.top](https://nextepisode.top).